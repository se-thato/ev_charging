{% extends 'VoltHub/base.html' %}
{% load static %}

{% block container_classes %}container-fluid p-0{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'VoltHub/home.css' %}">
{% endblock %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VoltHub - Home</title>
<style>
/* Home page external stylesheet */
:root {
  --vh-primary: #7a7cff; /* electric violet */
  --vh-accent: #00e5ff;  /* neon cyan */
  --vh-accent-2: #45ffbc; /* mint */
  --vh-border: rgba(122, 124, 255, 0.35);
  --vh-text: #e6e9ff;
  --vh-muted: #a9b1ff;
}

/* Subtle dark overlay above the video for readability */
.video-overlay {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  background: linear-gradient(180deg, rgba(5,5,12,0.55), rgba(5,5,12,0.35));
}

/* Hero overlay above background video */
.home-hero {
  position: relative;
  z-index: 1; /* ensure on top of fixed video */
  min-height: calc(100vh - 56px);
  display: grid;
  place-items: center;
  padding: 10vh 1rem 6vh;
}
.hero-inner {
  max-width: 980px;
  margin: 0 auto;
  text-align: center;
  color: var(--vh-text);
  /* glass panel for contrast without altering video */
  background: linear-gradient(180deg, rgba(8,8,25,0.58), rgba(8,8,25,0.28));
  border: 1px solid var(--vh-border);
  border-radius: 20px;
  backdrop-filter: blur(8px) saturate(140%);
  -webkit-backdrop-filter: blur(8px) saturate(140%);
  padding: 2rem 1.5rem;
  box-shadow: 0 20px 60px rgba(12, 16, 50, 0.55), inset 0 0 24px rgba(0, 229, 255, 0.08);
}
.hero-title {
  margin: 0 0 .5rem;
  font-weight: 800;
  font-size: clamp(2rem, 6vw, 3.5rem);
  letter-spacing: .4px;
  background: linear-gradient(90deg, var(--vh-primary), var(--vh-accent) 60%, var(--vh-accent-2));
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
  text-shadow: 0 0 12px rgba(122,124,255,0.25), 0 0 26px rgba(0,229,255,0.15);
}
.hero-text { color: #f2f5ff; text-shadow: 0 1px 2px rgba(0,0,0,0.6); font-size: clamp(.95rem, 2vw, 1.05rem); }

.accent-line { position: relative; height: 2px; margin: 1rem auto 1.5rem; max-width: 520px; }
.accent-line::after {
  content: ""; position: absolute; left: 0; right: 0; height: 2px; border-radius: 2px;
  background: linear-gradient(90deg, transparent, var(--vh-accent), var(--vh-primary), transparent);
  background-size: 200% 100%; animation: lineFlow 8s linear infinite;
}
@keyframes lineFlow { 0%{background-position:0% 50%} 100%{background-position:200% 50%} }

.hero-actions { display: flex; gap: .5rem; justify-content: center; flex-wrap: wrap; margin-top: .5rem; }
.btn-neon {
  display: inline-flex; align-items: center; justify-content: center; gap: .3rem;
  border: 1px solid var(--vh-border);
  color: var(--vh-text);
  border-radius: 8px;
  padding: .35rem .65rem;
  flex: 0 0 auto; width: auto; min-width: 0; white-space: nowrap;
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
  box-shadow: 0 0 0 1px rgba(122,124,255,0.25);
  transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease, color .2s ease;
  text-decoration: none;
}
.btn-neon:hover { color: #fff; border-color: rgba(0,229,255,0.65); background: linear-gradient(180deg, rgba(0,229,255,0.18), rgba(122,124,255,0.12)); box-shadow: 0 0 0 2px rgba(0,229,255,0.24), 0 10px 26px rgba(0,229,255,0.16); transform: translateY(-1px); }

/* Prominent CTA variant for visibility */
.btn-cta {
  font-weight: 700;
  padding: .5rem 1rem;
  background: linear-gradient(180deg, var(--vh-accent), var(--vh-primary));
  color: #0b0f2a;
  border-color: rgba(0,229,255,0.8);
  box-shadow: 0 0 0 2px rgba(0,229,255,0.3), 0 10px 26px rgba(0,229,255,0.22);
}
.btn-cta:hover { transform: translateY(-2px); }
.btn-cta:focus-visible { outline: 3px solid var(--vh-accent-2); outline-offset: 2px; }

/* Highlights strip */
.highlights { position: relative; z-index: 1; padding: 2.5rem 1rem 1rem; }
.highlights-inner { max-width: 1200px; margin: 0 auto; }
.highlights-grid { display: grid; grid-template-columns: repeat(12,1fr); gap: 1rem; }
.hl-card { grid-column: span 12; border: 1px solid var(--vh-border); border-radius: 16px; background: linear-gradient(180deg, rgba(8,8,25,0.5), rgba(8,8,25,0.25)); backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); padding: 1rem; color: var(--vh-text); box-shadow: 0 10px 30px rgba(12, 16, 50, 0.45); }
@media (min-width: 640px){ .hl-card{ grid-column: span 6; } }
@media (min-width: 992px){ .hl-card{ grid-column: span 4; } }
.hl-card h4 { margin: 0 0 .25rem; font-weight: 700; }
.hl-card p  { margin: 0; color: #e6e9ff; }

/* Testimonials */
.home-testimonials { position: relative; z-index: 1; padding: 2rem 1rem 4rem; }
.testimonials-inner { max-width: 1200px; margin: 0 auto; }
.testimonials-title { color: var(--vh-text); margin: 0 0 .75rem; font-weight: 800; text-align: center; }
.testimonial-grid { display: grid; gap: 1rem; grid-template-columns: repeat(12,1fr); }
.testimonial-card { grid-column: span 12; border: 1px solid var(--vh-border); border-radius: 18px; background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02)); backdrop-filter: blur(8px) saturate(140%); -webkit-backdrop-filter: blur(8px) saturate(140%); padding: 1rem 1.25rem; color: var(--vh-text); box-shadow: 0 20px 50px rgba(12, 16, 50, 0.45), inset 0 0 24px rgba(0, 229, 255, 0.06); }
@media (min-width: 768px){ .testimonial-card{ grid-column: span 6; } }
@media (min-width: 1200px){ .testimonial-card{ grid-column: span 4; } }
.testimonial-card h4 { margin: 0 0 .25rem; font-weight: 700; }
.testimonial-card p  { margin: 0 0 .35rem; font-style: italic; color: #e6e9ff; }
.testimonial-card small { color: var(--vh-muted); }

/* Mobile and accessibility tweaks */
.back-video { position: fixed; inset: 0; width: 100vw; height: 100vh; object-fit: cover; z-index: -1; }
.btn-neon, .btn-cta { min-height: 44px; padding: .6rem 1rem; font-size: 1rem; }
@media (max-width: 576px){
  .hero-inner { padding: 1.25rem 1rem; }
  .highlights { padding: 1.25rem 1rem; }
  .home-testimonials { padding: 1.25rem 1rem 2rem; }
  .testimonial-grid { gap: .75rem; }
  .testimonial-card { padding: .875rem 1rem; }
  .hero-actions { gap: .5rem; }
}
</style>
</head>

<body>

<video autoplay loop muted playsinline class="back-video">
  <source src="{% static 'VoltHub/image/video.mp4' %}" type="video/mp4">
</video>
<div class="video-overlay"></div>


<section class="home-hero">
  <div class="hero-inner">
    <h1 class="hero-title">Boost Your Energy!</h1>
    <div class="accent-line"></div>
    <p class="hero-text">
      Our EV charging station locator provides efficient and convenient options, from home installation to public fast-charging networks. Power up your EV now with fast, reliable, and eco-friendly charging solutions. Find a station near you.
    </p>
    <div class="hero-actions">
      <a href="{% url 'stations' %}" class="btn-neon"><i class="fa fa-map-marker"></i> Explore Charging Points</a>
    </div>
  </div>
</section>

<section class="highlights">
  <div class="highlights-inner">
    <div class="highlights-grid">
      <div class="hl-card">
        <h4><i class="fa fa-bolt"></i> Fast & Reliable</h4>
        <p>Access high-speed chargers with real-time availability.</p>
      </div>
      <div class="hl-card">
        <h4><i class="fa fa-globe"></i> Nationwide Coverage</h4>
        <p>Find stations across cities and highways wherever you go.</p>
      </div>
      <div class="hl-card">
        <h4><i class="fa fa-leaf"></i> Eco-Friendly</h4>
        <p>Reduce your footprint with clean, sustainable energy.</p>
      </div>
    </div>
  </div>
</section>


<section class="home-testimonials">
  <div class="testimonials-inner">
    <h2 class="testimonials-title">What Our Customers Say</h2>
    <div class="testimonial-grid">
      
      {% for comment in comments %}
        <div class="testimonial-card">
          <h4>- {{ comment.user.username }}</h4>
          <p>"{{ comment.comment_text }}"</p>
          <small>Posted on {{ comment.created_at|date:"F j, Y, g:i a" }}</small>
          <div class="mt-2" style="display:flex; gap:.5rem; align-items:center;">
            {% if user.is_authenticated %}
              <form method="post" action="/comments/{{ comment.id }}/upvote/">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-outline-success" title="Upvote">
                  <i class="fa fa-thumbs-up"></i> {{ comment.upvotes }}
                </button>
              </form>
              <form method="post" action="/comments/{{ comment.id }}/downvote/">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-outline-danger" title="Downvote">
                  <i class="fa fa-thumbs-down"></i> {{ comment.downvotes }}
                </button>
              </form>
            {% else %}
              <button type="button" class="btn btn-sm btn-outline-success" disabled title="Login to vote">
                <i class="fa fa-thumbs-up"></i> {{ comment.upvotes }}
              </button>
              <button type="button" class="btn btn-sm btn-outline-danger" disabled title="Login to vote">
                <i class="fa fa-thumbs-down"></i> {{ comment.downvotes }}
              </button>
              <a href="{% url 'authentication:login' %}" class="btn btn-link btn-sm" aria-label="Login to vote">Login to vote</a>
            {% endif %}
            <span class="badge bg-secondary">Score: {{ comment.total_votes }}</span>
          </div>
        </div>
      {% empty %}
        <div class="testimonial-card">
          <p>No comments yet. Be the first to share your thoughts!</p>
        </div>
      {% endfor %}
    </div>

    <div style="text-align:center; margin-top: 1rem;">
      {% if post_to_comment %}
        <a href="{% url 'post_detail' pk=post_to_comment.pk %}" class="btn-neon btn-cta" title="Add your comment" aria-label="Add your comment">
          <i class="fa fa-comment"></i> Add your comment
        </a>
      {% else %}
        <a href="{% url 'stations' %}" class="btn-neon btn-cta" title="Add your comment" aria-label="Add your comment">
          <i class="fa fa-comment"></i> Add your comment
        </a>
      {% endif %}
    </div>
  </div>
</section>

</body>

{% include 'VoltHub/footer.html' %}

{% endblock %}
